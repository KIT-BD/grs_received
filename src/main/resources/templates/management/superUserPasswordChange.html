<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div class="page-content" style="min-height: 1601px; font-family: Arial, sans-serif;" th:fragment="superUserPasswordChange">

    <div class="container" style="max-width: 600px; margin: 50px auto; background-color: #f9f9f9; padding: 30px; border-radius: 10px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);">
        <span style="text-align: center; font-size: 25px; color: #4a90e2;">Super Admin - এর পাসওয়ার্ড পরিবর্তন</span>

        <form id="changePasswordForm" class="ajax-submit-form" method="post" th:action="@{/api/admin/change-password}">

            <!-- Old Password -->
            <div class="form-group" style="margin-bottom: 20px; margin-top: 10px">
                <label for="oldPassword" style="font-weight: bold; color: #333;">বর্তমান পাসওয়ার্ড</label>
                <input type="password" name="oldPassword" id="oldPassword" class="form-control" required
                       style="width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px;" />
            </div>

            <!-- New Password -->
            <div class="form-group" style="margin-bottom: 20px; margin-top: 10px">
                <label for="newPassword" style="font-weight: bold; color: #333;">নতুন পাসওয়ার্ড</label>
                <input type="password" name="newPassword" id="newPassword" class="form-control" required
                       style="width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px;" />
            </div>

            <!-- Confirm New Password -->
            <div class="form-group" style="margin-bottom: 20px; margin-top: 10px">
                <label for="confirmPassword" style="font-weight: bold; color: #333;">পুনরায় নতুন পাসওয়ার্ড</label>
                <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" required
                       style="width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px;" />
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary"
                    style="width: 100%; margin-top: 10px padding: 12px; background-color: #4a90e2; color: #fff; border: none; border-radius: 5px; font-size: 18px; font-weight: bold; cursor: pointer;">
                পাসওয়ার্ড সেট করুন
            </button>

        </form>
    </div>

    <script th:inline="javascript">
        $(document).ready(function () {
            var form = $("#changePasswordForm");

            form.on("submit", function (event) {
                event.preventDefault();
                var url = form.attr("action");

                var dataObject = {
                    oldPassword: $('#oldPassword').val(),
                    newPassword: $('#newPassword').val(),
                    confirmPassword: $('#confirmPassword').val()
                };

                if (dataObject.newPassword !== dataObject.confirmPassword) {
                    alert("New password and confirmation do not match");
                    return;
                }

                var data = JSON.stringify(dataObject);

                $.ajax({
                    type: "POST",
                    url: url,
                    data: data,
                    dataType: "json",
                    contentType: "application/json",
                    success: function (response) {
                        if (response.success) {
                            alert("Password changed successfully!");
                            form.trigger("reset");
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function (xhr, status, error) {
                        alert("Error: " + error);
                    }
                });
            });
        });
    </script>
</div>
</html>
